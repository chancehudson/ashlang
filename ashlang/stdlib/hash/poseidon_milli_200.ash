(input)

static MDS_MATRIX = [0x22f7f6d8, 0x86bfee25, 0xb99909f1, 0xa7173d28, 0xc9b59db9, 0x7598a160, 0xbbf14242, 0xfcf89c5e, 0x877824fb, 0x625700f5, 0xfc9bf82f, 0xa60e3036, 0x312a582e, 0x6e9cec08, 0x786f80be,
 0x93afac39, 0xc891720f, 0x1bd497b9, 0xf7760d91, 0x14afc9ce, 0x82300d43, 0x9acc579a, 0xf29857d0, 0xbd38f2a0, 0x4a03f4db, 0x552dc989, 0x1b437c58, 0xfeb026be, 0x6ce1dd8d, 0x4ffa5b49,
 0x408141d2, 0x51a52598, 0x4860ad9e, 0x162a0c86, 0xe6c8813d, 0x5a2b8094, 0x688fbe4f, 0xfb3c48bb, 0xcf747b52, 0x77a1ef2d, 0x607aa014, 0x1a7e58a7, 0xda0310db, 0xedec4476, 0x0c0a8cf2,
 0x6b2423e4, 0x8056fb97, 0xa3978b4e, 0x66815d2f, 0x2e83b7f4, 0x67badaa0, 0x229fdb12, 0x2b89a8d9, 0x63240a39, 0x9224de65, 0x7099ce64, 0xd12687ce, 0x42ce3fea, 0x0b887661, 0x43cf2638,
 0x036c70ab, 0xc3e0468f, 0xb2ccb705, 0x7767f260, 0x4bfaa7e5, 0x1fc7c336, 0x21e3724d, 0x9eae071c, 0x32de7994, 0x97243441, 0xb86cc6a0, 0x56170479, 0x8681dedb, 0x12eb5369, 0x413f22ba,
 0x151d9793, 0xb26f36f1, 0x155cb844, 0xf9bbfc89, 0xcb33c224, 0xeb6eebe8, 0x1502330b, 0x34b2f75e, 0x60747a3a, 0x0cc4e91e, 0xb0f3bc24, 0x481c6710, 0x36b7f0da, 0xdfb75121, 0x97ff3a18,
 0xdf9ccf18, 0xd3506a09, 0x5e65ae53, 0xef0055d6, 0x44e735b4, 0x57419364, 0x169373f9, 0x43b5c7da, 0x1c67c7c3, 0xb413c4eb, 0x8ab68436, 0x4e996834, 0xf78159da, 0x5da0f79b, 0x6a61ba54,
 0xb742a75b, 0xac3bdfae, 0x052b4678, 0x53b8ef19, 0x9c8982ba, 0x6ba6f510, 0x1a00c469, 0xe98f564d, 0xeaed2025, 0xa4f32d8c, 0x27956c6a, 0xfd74a163, 0xfb550754, 0x5c3d4307, 0x32a08afc,
 0x4053a3e6, 0xcd7dbe5a, 0xb318a4d0, 0xdc5741a5, 0x377e16a5, 0x492029ed, 0x8c133f3a, 0x9965ab61, 0x430be0f5, 0x2f9b170e, 0x48b5e3b6, 0x3f55d628, 0xfaa8c9a8, 0x9ae5b83c, 0x974f843c,
 0x937bc8df, 0x2ae0ce7a, 0xd9b679d5, 0xcc1c7a61, 0x2a0e6c42, 0x34087fb0, 0xf88fe826, 0xf6a1ec04, 0x60dd8082, 0xb81e056b, 0x810a1f96, 0xbb29ba1e, 0x47018e3a, 0xfc65ab47, 0xd643eed4,
 0x31c3f5e6, 0x35cfd229, 0x837b4382, 0x0a143ef7, 0x5a1cdf43, 0x41945de8, 0xec0285ec, 0x15a88778, 0x9a183588, 0x1f99c444, 0xa21777b2, 0xd2a59eb2, 0xdba42273, 0xcddfc45a, 0x64295a41,
 0x75cb9ebf, 0x68c7b7c2, 0xff8bfe21, 0x648dbd5d, 0xc2db3098, 0xc03ac290, 0xce8ae1c6, 0x5b5b4611, 0xc05a1602, 0xe0e9657b, 0xd96a3a1e, 0x12b775e4, 0xf88f83e6, 0xdcf78f29, 0x1a44dc11,
 0xe3298aa8, 0x8608c93f, 0xc00fbfbc, 0x90f4af69, 0x40124da8, 0xbbdddbb7, 0xdc952b94, 0x672d9f3d, 0x9d10fe8b, 0x824d5f34, 0x1bfe9389, 0x24fe456a, 0x99939688, 0xa98c21b9, 0xd113fed9,
 0xe4f52b1e, 0x80c7d8b1, 0x1b5eaae6, 0xb08d84ae, 0x5293dbf6, 0xa390bfc9, 0xb38221f8, 0xcfb8b5d0, 0x93fab5d6, 0xee02e5ea, 0xfc1a7d05, 0x9e283111, 0x5620d81b, 0xe4b27e54, 0x99d8c778,
 0xf0e32227, 0x5d33ece3, 0x5f7612b1, 0xfbb1bedf, 0x46d3f187, 0xae24c4f5, 0x4c4f6376, 0xa7e5cdea, 0x83acc292, 0x66e89113, 0xd061bb4c, 0x63e90bb2, 0xaccb823b, 0x35087a0e, 0x6a5e3b3b]


static ROUND_CONSTANTS = [0x1dea77fc, 0xe4d41cd4, 0xaaa117ff, 0x20741b09, 0xecee11aa, 0x1a0914c0, 0xca3b1279, 0x77926e5e, 0x166f85ea, 0xb9ec52e3, 0x1a198713, 0xab67d359, 0xefab5221, 0x731a51b6, 0xee930d0e, 0xf8eae2b3, 0xd31e68cb, 0xcb902122, 0x38c3d936, 0x67ae5ebd, 0xb3f63c37, 0xadf6e190, 0xfe43f8b0, 0xd9de9ee3, 0x858b7aff, 0xde243155, 0xc3c56513, 0xade600ad, 0x140b6e58, 0xfc5dab3d, 0x3895d016, 0xb8049382, 0xe5623359, 0x04a9ff7f, 0xef4468d4, 0x82761162, 0x71e44eae, 0x75d10275, 0x662c0cf8, 0xec959279, 0x65393003, 0x562b5df7, 0xe6ef6f0f, 0xba05728e, 0x22f5c77e, 0x7e4e42c1, 0x3cf6c84e, 0x2ff9ee64, 0x1394cab4, 0x336db2f0, 0xe0a056dc, 0xf79e4a89, 0x693a379c, 0x39ea41c1, 0x03222e17, 0xbe97d06b, 0xf14b0614, 0xbcf8bf8c, 0x65d264be, 0xc213369e, 0x6b803385, 0x1eb439a8, 0xb1d823da, 0xb28ea9c6, 0x8a4602fd, 0xc09c1f8f, 0x2af45a8a, 0x421652c5, 0xe31fa09d, 0x27e1d836, 0x9c891859, 0xb659cf62, 0x77f09b51, 0xc653e1ed, 0x5ceff9e7, 0x356e401f, 0x09ddda59, 0x2e753d03, 0x7d9ff758, 0x43f35674, 0x2557aa2e, 0x2d2b1f0a, 0x7bc52b3b, 0xe16f5a0a, 0x4efac951, 0x86e10347, 0xdfaea413, 0xf469c555, 0x357028b5, 0x70db5bd2, 0xa3a44e11, 0x988349a9, 0x01979346, 0x7fecb9d3, 0x3e743f08, 0x4891381e, 0x1251b925, 0x03752606, 0xcc47e545, 0xd79cf467, 0x5f976a25, 0x946b95e2, 0x6e60d2e5, 0x93ad6ab1, 0x68fd9204, 0x92e30ecd, 0x70499ca3, 0x28cbf94a, 0x274ff55e, 0x852ffa73, 0x0dcdbb1c, 0xd4922667, 0xe214f0d1, 0x7ddffbe5, 0x6622e1b2, 0xdd1df6a9, 0x38b80570, 0x04a9bb98, 0x4c9bda8f, 0x03674df0, 0x173c215b, 0x5f35a45b, 0xc1403041, 0xec0935fd, 0xc2586ddb, 0x5d03d73a, 0x59080dca, 0x30cdc8f9, 0xa7983605, 0x8ef4e474, 0xd4dbd040, 0x42600157, 0x10453a87, 0xe0b4336b, 0x856acbaa, 0x669f3dd5, 0xdea745dd, 0x04f4778f, 0xed090899, 0xbbad71bd, 0x98abd4df, 0xc8af7042, 0xe874ac26, 0xab7572d0, 0x60e0e94d, 0xda4bf465, 0x37fb2fe8, 0xa45a35e4, 0x780e7673, 0x44d6c35e, 0x0267db7b, 0x6356a215, 0x1a2417a4, 0x4dd584a0, 0xa539699b, 0x7f00d4dc, 0x2cdffe39, 0x705e885a, 0x7c464b1e, 0x7a2337e8, 0x58c7373d, 0xb365c10c, 0xd19ac803, 0xc37fa657, 0x14369a75, 0x3edbc357, 0x23b4329d, 0x4cbd126f, 0x65ad5629, 0x82520e22, 0xd5bb4f51, 0x2b229135, 0x02d3799e, 0xa37b9c05, 0x6604fa3e, 0xf3aaa484, 0x9009b1d7, 0x7ce70cf0, 0x005f6503, 0xc13a52e5, 0xb4e223b7, 0xe39f3a3b, 0x5fcfe9e1, 0x9ccc7e89, 0x64bfa423, 0xcc31f4a3, 0xefd073c4, 0x33475960, 0xda92d9d4, 0xc8ab256c, 0x8b37cef3, 0xeab4c6a1, 0xe1b08bf2, 0xce8d3965, 0x088d8751, 0x5f1c587f, 0x8c55739b, 0x1afc42af, 0x16cf5441, 0x1bcf36ef, 0x2eeb82e1, 0xa6ce9481, 0x0d91cb8d, 0x1db523e9, 0x6fd0d618, 0x164b51a9, 0x7743d610, 0x8f85e7d0, 0xd6ff724d, 0xf99eb103, 0x8df90966, 0x27522e95, 0x5099e4a9, 0x1998a5dc, 0x28f4adc0, 0x99b91a44, 0x15ca0f8e, 0xfba2d31c, 0xf7c99672, 0xcde4f865, 0x3af8a58c, 0x8a7f8da8, 0x1a49217e, 0xa0141528, 0x99215eb4, 0x7722662e, 0x58eb9e5f, 0xd5c3c357, 0xa03d5b8a, 0x2dceb9ef, 0x2e5277d3, 0xb37ce54e, 0x27536c4e, 0x495ede7d, 0x3bf3b17f, 0xd1896029, 0x9d7fb31c, 0x91223e31, 0x854ac1a2, 0x0ae52ef4, 0x22ecefc4, 0xb7d94702, 0x1b471015, 0x2ca73bad, 0x8dd077fd, 0xc0d807f6, 0x96f33d4a, 0x1a8580ca, 0xcee6f45f, 0x468c8c79, 0xf21b9c0e, 0xadb9bd2a, 0xaad95a73, 0xf279af69, 0x6c125400, 0x7dfefbf4, 0x85359e3b, 0x8c8e3236, 0x2373b857, 0x91a54b80, 0xc28fd95d, 0x215364f7, 0xf5846ea6, 0xa19b943c, 0xa3733b50, 0x3d7838ab, 0x7f63cb5c, 0xe3459801, 0xd03ab6d4, 0x90b1fccf, 0x0605431c, 0xa7272024, 0x62e95bf5, 0x5073d0b1, 0xd72b66ee, 0xe7ae7551, 0x61bcf0d5, 0x054db646, 0x0f8fc69d, 0xb9e06983, 0xbbcb4323, 0x2bcc79b9, 0x56c4ed36, 0x2c1f8c8c, 0x55758d83, 0xa509dd0d, 0x1f9d70e1, 0xe27a6e90, 0x4b943bf3, 0x36e1afca, 0xf186f271, 0xf114df76, 0x0401acdb, 0x8a5c78ee, 0x75f9d8f8, 0x0f244797, 0x9ed4d8af, 0x7fc9af40, 0xeb219fca, 0x5f83944c, 0x3ea30294, 0x81bbb626, 0x157b0d94, 0xe155d07c, 0x44f46206, 0x25a145a9, 0x5bc9d027, 0x47dd771c, 0x9facbe53, 0x205fade5, 0x6f5b3be5, 0x11d27cf4, 0x01c7131b, 0x7427d764, 0x1b2dcb99]

# number of full rounds
static N_ROUNDS_F = 8

# number of partial rounds
static N_ROUNDS_P = 13

# power being raised to in the s-box
static ALPHA = 11

# state vector len
static T = 15

# MDS matrix is TxT

# number of round constants
static N_C = 315

# initialize state vector
let state[T]
state[0] = 0

static input_len = len input
static i = 1 
loop input_len {
  state[i] = 0
  i = i + 1
}

# we want to initialize any trailing state elements
static i = 0
loop_short T - input_len - 1 {
  state[1 + input_len + i] = 0
  i = i + 1
}

# initialize inputs
static i = 0
loop input_len {
  state[i + 1] = input[i]
  i = i + 1
}

# first set of full rounds
static x = 0
static c = div_floor N_ROUNDS_F 2
loop c {
    static y = 0
    loop T {
      state[y] = state[y] + ROUND_CONSTANTS[x * T + y]
      state[y] = pow(state[y], ALPHA)
      y = y + 1
    }
    state = poseidon_milli_200_mix(state, MDS_MATRIX, T)
    x = x + 1
}

# partial rounds
static x = 0
loop N_ROUNDS_P {
    static y = 0
    state[y] = state[y] + ROUND_CONSTANTS[x * T + y]
    state[y] = pow(state[y], ALPHA)
    y = y + 1
    loop T - 1 {
      state[y] = state[y] + ROUND_CONSTANTS[x * T + y]
      y = y + 1
    }
    state = poseidon_milli_200_mix(state, MDS_MATRIX, T)
    x = x + 1
}

# final set of full rounds
static x = 0
static v = div_floor N_ROUNDS_F 2
loop v {
    static y = 0
    loop T {
      state[y] = state[y] + ROUND_CONSTANTS[x * T + y]
      state[y] = pow(state[y], ALPHA)
      y = y + 1
    }
    state = poseidon_milli_200_mix(state, MDS_MATRIX, T)
    x = x + 1
}

return state
